!function(n,e){"use strict";function t(t,r){function l(n){var e;if(!s.rows[n])for(e=0;n>=e;e++)s.rows[e]=s.rows[e]||{cells:[],table:s};return s.rows[n]}function c(n){var e;if(!s.cols[n])for(e=0;n>=e;e++)s.cols[e]=s.cols[e]||{cells:[],table:s};return s.cols[n]}var s={rows:[],cols:[],cells:[]},u="number"==typeof r?r:x.length,a=-1,i={},f="table"===t.get(0).nodeName.toLowerCase()?t.get(0):function(){var n=t.closest("table");return n.length?n.get(0):e}();if(f)return s.elm=f,n(f).data(y,"table:"+u),n.each(f.rows,function(e,t){var o,r,f,h,w,v,g,m,b,d=0;for(n(t).data(y,"table:"+u+",row:"+e),function(){var e=0;n.each(t.cells,function(n,t){e+=+t.colSpan||1}),e-1>a&&(a=e-1)}(),h=0;a>=h;h++)if((!i[e]||!i[e][h])&&(w=t.cells[d++])){for(n(w).data(y,"table:"+u+",cell:"+s.cells.length),f={elm:w,rows:[],cols:[],table:s,iRow:e,iCol:h},v=(+w.rowSpan||1)-1,g=(+w.colSpan||1)-1,m=0;v>=m;m++)o=l(e+m),f.rows.push(o),o.cells.push(f);for(m=0;g>=m;m++)r=c(h+m),f.cols.push(r),r.cells.push(f);for(m=1;v>=m;m++)for(i[e+m]=i[e+m]||{},b=0;g>=b;b++)i[e+m][h+b]=!0;h+=g,s.cells.push(f)}}),n.each(s.cells,function(e,t){var r=[t];n.each(t.rows.concat(t.cols),function(n,e){o(r,e.cells)}),t.xCells=r}),n.each(s.rows,function(n,e){e.cells.sort(function(n,e){return n.iCol-e.iCol})}),n.each(s.cols,function(n,e){e.cells.sort(function(n,e){return n.iRow-e.iRow})}),x[u]=s,s}function o(e,t){n.each(t,function(t,o){n.inArray(o,e)<0&&e.push(o)})}function r(n){for(var e,t={},o=n.data(y)||"",r=/\b(\w+):(\d+)/g;null!==(e=r.exec(o));)t[e[1]]=+e[2];return t}function l(n,e){var o=r(n).table;return e||"number"!=typeof o||!x[o]?t(n,o):x[o]}function c(n){return"table"===n}function s(n){return"tr"===n}function u(n){return"td"===n||"th"===n}function a(n){return"thead"===n||"tfoot"===n||"tbody"===n}function i(n){return c(n)||s(n)||u(n)||a(n)}function f(e){return n.map(e,function(n){return n.elm})}function h(e){return n(f(e))}function w(e){var t=[];return e.each(function(){var e,i=n(this),h=i.get(0).nodeName.toLowerCase();c(h)&&(e=l(i))?o(t,f(e.cells)):s(h)&&(e=l(i))?o(t,f(e.rows[r(i).row].cells)):u(h)&&(e=l(i))?o(t,[e.cells[r(i).cell].elm]):a(h)&&(e=l(i))&&n.each(i.get(0).rows,function(l,c){o(t,f(e.rows[r(n(c)).row].cells))})}),n(t.length?t:null)}function v(e){var t=[];return e.each(function(){var e,c=n(this),s=c.get(0).nodeName.toLowerCase();u(s)&&(e=l(c))&&o(t,f(e.cells[r(c).cell].xCells))}),n(t.length?t:null)}function g(e){return n.map(b(e),function(n){return h(n.cells)})}function m(e){var t=[];return n.each(b(e),function(n,e){o(t,f(e.cells))}),n(t.length?t:null)}function b(e){var t=[];return e.each(function(){var e,i=n(this),f=i.get(0).nodeName.toLowerCase();c(f)&&(e=l(i))?o(t,e.rows):s(f)&&(e=l(i))?o(t,[e.rows[r(i).row]]):u(f)&&(e=l(i))?o(t,e.cells[r(i).cell].rows):a(f)&&(e=l(i))&&o(t,n.map(i.get(0).rows,function(t){return e.rows[r(n(t)).row]}))}),t}function d(e){return n.map(C(e),function(n){return h(n.cells)})}function p(e){var t=[];return n.each(C(e),function(n,e){o(t,f(e.cells))}),n(t.length?t:null)}function C(e){var t=[];return e.each(function(){var e,i=n(this),f=i.get(0).nodeName.toLowerCase();(c(f)||s(f)||a(f))&&(e=l(i))?o(t,e.cols):u(f)&&(e=l(i))&&o(t,e.cells[r(i).cell].cols)}),t}function L(e){var t=[];return e.each(function(){var e,r=n(this),c=r.get(0).nodeName.toLowerCase();i(c)&&(e=l(r))&&o(t,[e.elm])}),n(t.length?t:null)}function N(e){return e.each(function(){var e=n(this),t=e.get(0).nodeName.toLowerCase();i(t)&&l(e,!0)})}var y="getTable",x=[];n.fn[y]=function(n){return"cells"===n?w(this):"xCells"===n?v(this):"rows"===n?g(this):"rowsCells"===n?m(this):"cols"===n?d(this):"colsCells"===n?p(this):"table"===n?L(this):N(this)}}(jQuery);