!function(e,n){"use strict";function t(t,r){function l(e){var n;if(!s.rows[e])for(n=0;e>=n;n++)s.rows[n]=s.rows[n]||{cells:[],table:s};return s.rows[e]}function c(e){var n;if(!s.cols[e])for(n=0;e>=n;n++)s.cols[n]=s.cols[n]||{cells:[],table:s};return s.cols[e]}var s={rows:[],cols:[],cells:[]},u="number"==typeof r?r:C.length,a=-1,i={},f="table"===t.get(0).nodeName.toLowerCase()?t.get(0):function(){var e=t.closest("table");return e.length?e.get(0):n}();if(f)return s.elm=f,e(f).data(p,"table:"+u),e.each(f.rows,function(n,t){var o,r,f,h,w,v,g,m,b,d=0;for(e(t).data(p,"table:"+u+",row:"+n),function(){var n=0;e.each(t.cells,function(e,t){n+=+t.colSpan||1}),n-1>a&&(a=n-1)}(),h=0;a>=h;h++)if((!i[n]||!i[n][h])&&(w=t.cells[d++])){for(e(w).data(p,"table:"+u+",cell:"+s.cells.length),f={elm:w,rows:[],cols:[],table:s,iRow:n,iCol:h},v=(+w.rowSpan||1)-1,g=(+w.colSpan||1)-1,m=0;v>=m;m++)o=l(n+m),f.rows.push(o),o.cells.push(f);for(m=0;g>=m;m++)r=c(h+m),f.cols.push(r),r.cells.push(f);for(m=1;v>=m;m++)for(i[n+m]=i[n+m]||{},b=0;g>=b;b++)i[n+m][h+b]=!0;h+=g,s.cells.push(f)}}),e.each(s.cells,function(n,t){var r=[t];e.each(t.rows.concat(t.cols),function(e,n){o(r,n.cells)}),t.xCells=r}),e.each(s.rows,function(e,n){n.cells.sort(function(e,n){return e.iCol-n.iCol})}),e.each(s.cols,function(e,n){n.cells.sort(function(e,n){return e.iRow-n.iRow})}),C[u]=s,s}function o(n,t){e.each(t,function(t,o){e.inArray(o,n)<0&&n.push(o)})}function r(e){for(var n,t={},o=e.data(p)||"",r=/\b(\w+):(\d+)/g;null!==(n=r.exec(o));)t[n[1]]=+n[2];return t}function l(e,n){var o=r(e).table;return n||"number"!=typeof o||!C[o]?t(e,o):C[o]}function c(e){return"table"===e}function s(e){return"tr"===e}function u(e){return"td"===e||"th"===e}function a(e){return"thead"===e||"tfoot"===e||"tbody"===e}function i(e){return c(e)||s(e)||u(e)||a(e)}function f(n){return e.map(n,function(e){return e.elm})}function h(n){return e(f(n))}function w(n){var t=[];return n.each(function(){var n,i=e(this),h=i.get(0).nodeName.toLowerCase();c(h)&&(n=l(i))?o(t,f(n.cells)):s(h)&&(n=l(i))?o(t,f(n.rows[r(i).row].cells)):u(h)&&(n=l(i))?o(t,[n.cells[r(i).cell].elm]):a(h)&&(n=l(i))&&e.each(i.get(0).rows,function(l,c){o(t,f(n.rows[r(e(c)).row].cells))})}),e(t.length?t:null)}function v(n){var t=[];return n.each(function(){var n,c=e(this),s=c.get(0).nodeName.toLowerCase();u(s)&&(n=l(c))&&o(t,f(n.cells[r(c).cell].xCells))}),e(t.length?t:null)}function g(n){var t=[];return n.each(function(){var n,i=e(this),f=i.get(0).nodeName.toLowerCase();c(f)&&(n=l(i))?o(t,n.rows):s(f)&&(n=l(i))?o(t,[n.rows[r(i).row]]):u(f)&&(n=l(i))?o(t,n.cells[r(i).cell].rows):a(f)&&(n=l(i))&&o(t,e.map(i.get(0).rows,function(t){return n.rows[r(e(t)).row]}))}),e.map(t,function(e){return h(e.cells)})}function m(n){var t=[];return n.each(function(){var n,i=e(this),f=i.get(0).nodeName.toLowerCase();(c(f)||s(f)||a(f))&&(n=l(i))?o(t,n.cols):u(f)&&(n=l(i))&&o(t,n.cells[r(i).cell].cols)}),e.map(t,function(e){return h(e.cells)})}function b(n){var t=[];return n.each(function(){var n,r=e(this),c=r.get(0).nodeName.toLowerCase();i(c)&&(n=l(r))&&o(t,[n.elm])}),e(t.length?t:null)}function d(n){return n.each(function(){var n=e(this),t=n.get(0).nodeName.toLowerCase();i(t)&&l(n,!0)})}var p="getTable",C=[];e.fn[p]=function(e){return"cells"===e?w(this):"xCells"===e?v(this):"rows"===e?g(this):"cols"===e?m(this):"table"===e?b(this):d(this)}}(jQuery);